/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var re=Object.create;var v=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var le=(e,n)=>{for(var t in n)v(e,t,{get:n[t],enumerable:!0})},G=(e,n,t,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of oe(n))!se.call(e,r)&&r!==t&&v(e,r,{get:()=>n[r],enumerable:!(o=ne(n,r))||o.enumerable});return e};var W=(e,n,t)=>(t=e!=null?re(ie(e)):{},G(n||!e||!e.__esModule?v(t,"default",{value:e,enumerable:!0}):t,e)),ae=e=>G(v({},"__esModule",{value:!0}),e);var ye={};le(ye,{default:()=>$});module.exports=ae(ye);var L=require("obsidian");var A=require("obsidian"),m=W(require("fs")),x=W(require("path"));function Q(e){return`${e.app.vault.configDir}/plugins/${e.manifest.id}`}function ce(e){return x.join(Q(e),"config/s3Config.json")}function O(e){return x.join(Q(e),"config/s3Profiles.json")}function I(e={}){var n,t,o,r,d,l,s,a,u,i;return{id:`pf_${Date.now()}_${Math.random().toString(36).slice(2)}`,name:(n=e.name)!=null?n:"Default",providerType:(t=e.providerType)!=null?t:"custom",endpoint:(o=e.endpoint)!=null?o:"",accessKeyId:(r=e.accessKeyId)!=null?r:"",secretAccessKey:(d=e.secretAccessKey)!=null?d:"",bucketName:(l=e.bucketName)!=null?l:"",region:(s=e.region)!=null?s:"",keyPrefix:(a=e.keyPrefix)!=null?a:"",useSSL:(u=e.useSSL)!=null?u:!0,baseUrl:(i=e.baseUrl)!=null?i:""}}function C(e){var t;let n=O(e);try{if(!m.existsSync(n))return{currentProfileId:null,profiles:[]};let o=m.readFileSync(n,"utf-8");if(!o)return{currentProfileId:null,profiles:[]};let r=JSON.parse(o);return!r||!Array.isArray(r.profiles)?{currentProfileId:null,profiles:[]}:{currentProfileId:(t=r.currentProfileId)!=null?t:null,profiles:r.profiles.map(d=>{var l,s;return{...I(),...d,keyPrefix:(l=d.keyPrefix)!=null?l:"",baseUrl:(s=d.baseUrl)!=null?s:""}})}}catch(o){return new A.Notice("S3 \u591A\u8D26\u6237\u914D\u7F6E\u635F\u574F\uFF0C\u5DF2\u56DE\u9000\u4E3A\u7A7A\u3002\u8BF7\u68C0\u67E5 config/s3Profiles.json"),{currentProfileId:null,profiles:[]}}}function b(e,n){var d,l,s,a;let t=O(e),o=x.dirname(t);m.existsSync(o)||m.mkdirSync(o,{recursive:!0});let r={currentProfileId:(s=n.currentProfileId)!=null?s:(l=(d=n.profiles[0])==null?void 0:d.id)!=null?l:null,profiles:((a=n.profiles)!=null?a:[]).map(u=>{var i,f;return{...I(),...u,keyPrefix:(i=u.keyPrefix)!=null?i:"",baseUrl:(f=u.baseUrl)!=null?f:""}})};m.writeFileSync(t,JSON.stringify(r,null,2),"utf-8")}function T(e){var o,r,d,l,s,a,u,i;let n=ce(e),t=O(e);if(!m.existsSync(t)){if(!m.existsSync(n)){b(e,{currentProfileId:null,profiles:[]});return}try{let f=m.readFileSync(n,"utf-8"),y=f?JSON.parse(f):{},P=I({name:"Default",providerType:"custom",endpoint:(o=y.endpoint)!=null?o:"",accessKeyId:(r=y.accessKeyId)!=null?r:"",secretAccessKey:(d=y.secretAccessKey)!=null?d:"",bucketName:(l=y.bucketName)!=null?l:"",region:(s=y.region)!=null?s:"",keyPrefix:(a=y.keyPrefix)!=null?a:"",useSSL:(u=y.useSSL)!=null?u:!0,baseUrl:(i=y.baseUrl)!=null?i:""});b(e,{currentProfileId:P.id,profiles:[P]}),new A.Notice("\u5DF2\u81EA\u52A8\u5C06\u65E7\u7248 S3 \u914D\u7F6E\u8FC1\u79FB\u4E3A\u591A\u8D26\u6237\u7ED3\u6784")}catch(f){b(e,{currentProfileId:null,profiles:[]}),new A.Notice("\u65E7\u7248\u914D\u7F6E\u8FC1\u79FB\u5931\u8D25\uFF0C\u5DF2\u521B\u5EFA\u7A7A\u7684\u591A\u8D26\u6237\u914D\u7F6E")}}}function B(e){var o;T(e);let n=C(e),t=(o=n.profiles.find(r=>r.id===n.currentProfileId))!=null?o:n.profiles[0];return t!=null?t:I({name:"Default"})}function z(e){return T(e),C(e).profiles}function k(e,n){var l,s,a,u,i,f,y;T(e);let t=C(e),o=(l=n.id)!=null?l:`pf_${Date.now()}_${Math.random().toString(36).slice(2)}`,r=t.profiles.findIndex(P=>P.id===o),d={...I(),...t.profiles[r],...n,id:o,keyPrefix:(u=n.keyPrefix)!=null?u:(a=(s=t.profiles[r])==null?void 0:s.keyPrefix)!=null?a:"",baseUrl:(y=n.baseUrl)!=null?y:(f=(i=t.profiles[r])==null?void 0:i.baseUrl)!=null?f:""};return r>=0?t.profiles.splice(r,1,d):(t.profiles.push(d),t.currentProfileId||(t.currentProfileId=d.id)),b(e,t),d}function Y(e,n){var d,l;T(e);let t=C(e),o=t.profiles.filter(s=>s.id!==n),r=t.currentProfileId===n?(l=(d=o[0])==null?void 0:d.id)!=null?l:null:t.currentProfileId;b(e,{currentProfileId:r,profiles:o})}function h(e,n){T(e);let t=C(e);if(!t.profiles.some(o=>o.id===n)){new A.Notice("\u6307\u5B9A\u7684\u914D\u7F6E\u4E0D\u5B58\u5728");return}t.currentProfileId=n,b(e,t)}function D(e){var o,r,d,l,s,a,u,i;let n=B(e);return{endpoint:(o=n.endpoint)!=null?o:"",accessKeyId:(r=n.accessKeyId)!=null?r:"",secretAccessKey:(d=n.secretAccessKey)!=null?d:"",bucketName:(l=n.bucketName)!=null?l:"",region:(s=n.region)!=null?s:"",useSSL:(a=n.useSSL)!=null?a:!0,keyPrefix:(u=n.keyPrefix)!=null?u:"",baseUrl:(i=n.baseUrl)!=null?i:""}}var F=require("obsidian"),de={};var X={};async function Z(e){let n=F.moment.locale(),t=de[n]||{};try{let o=`.obsidian/plugins/${e.manifest.id}/custom-lang.json`,r=e.app.vault.getAbstractFileByPath(o);if(r&&r instanceof F.TFile){let d=await e.app.vault.read(r),l=JSON.parse(d);t={...t,...l}}}catch(o){console.error("i18n: failed to load custom-lang.json",o)}X=t}function c(e){var n;return(n=X[e])!=null?n:e}function K(e,n){let t=c(e);return n?Object.keys(n).reduce((o,r)=>o.replace(new RegExp(`\\{${r}\\}`,"g"),String(n[r])),t):t}var p=require("obsidian");var te={},ee={"cloudflare-r2":[{key:"name",label:"\u914D\u7F6E\u540D\u79F0",placeholder:"\u4F8B\u5982\uFF1A\u6211\u7684\u535A\u5BA2\u56FE\u5E8A",note:"\u7ED9\u4F60\u81EA\u5DF1\u770B\u7684\u4E00\u4E2A\u53CB\u597D\u540D\u79F0\u3002",required:!0},{key:"endpoint",label:"Endpoint",placeholder:"<ACCOUNT_ID>.r2.cloudflarestorage.com",note:"\u5FC5\u9700\u3002\u6765\u81EA R2 \u4EEA\u8868\u76D8\uFF0C\u4E0D\u542B bucket \u8DEF\u5F84\u3002",required:!0},{key:"bucketName",label:"Bucket",placeholder:"\u4F8B\u5982\uFF1Amy-bucket",note:"\u5FC5\u9700\u3002R2 \u5B58\u50A8\u6876\u540D\u79F0\u3002",required:!0},{key:"accessKeyId",label:"Access Key ID",placeholder:"\u8BF7\u8F93\u5165 Access Key ID",note:"\u5FC5\u9700\u3002R2 API \u5BC6\u94A5\u3002",required:!0},{key:"secretAccessKey",label:"Secret Access Key",placeholder:"\u8BF7\u8F93\u5165 Secret Access Key",note:"\u5FC5\u9700\u3002R2 API \u5BC6\u94A5\u3002",required:!0,type:"password"},{key:"region",label:"Region",placeholder:"auto",note:"R2 \u5FC5\u987B\u586B auto\u3002",required:!0,defaultValue:"auto"},{key:"useSSL",label:"Use SSL",placeholder:"",note:"\u5EFA\u8BAE\u5F00\u542F\u3002",required:!0,defaultValue:!0,type:"toggle"},{key:"baseUrl",label:"Public Base URL",placeholder:"https://<bucket>.r2.dev \u6216\u4F60\u7684\u81EA\u5B9A\u4E49\u57DF",note:"\u7528\u4E8E\u62FC\u63A5\u53EF\u8BBF\u95EE\u94FE\u63A5\uFF0C\u4E0D\u7528\u4E8E API\u3002",required:!1},{key:"keyPrefix",label:"Key Prefix",placeholder:"images/ \u6216 yyyy/mm/dd/",note:"\u5BF9\u8C61\u952E\u524D\u7F00\uFF0C\u53EF\u9009\u3002",required:!1}],minio:[{key:"name",label:"\u914D\u7F6E\u540D\u79F0",placeholder:"\u4F8B\u5982\uFF1A\u672C\u5730\u6D4B\u8BD5 MinIO",note:"\u7ED9\u4F60\u81EA\u5DF1\u770B\u7684\u4E00\u4E2A\u53CB\u597D\u540D\u79F0\u3002",required:!0},{key:"endpoint",label:"Endpoint",placeholder:"http://127.0.0.1:9000",note:"\u5FC5\u9700\u3002\u6CE8\u610F\u5305\u542B http:// \u6216 https://\uFF0C\u4E14\u4F7F\u7528 path-style\u3002",required:!0},{key:"bucketName",label:"Bucket",placeholder:"\u4F8B\u5982\uFF1Aobsidian-vault",note:"\u5FC5\u9700\u3002MinIO \u5B58\u50A8\u6876\u540D\u79F0\u3002",required:!0},{key:"accessKeyId",label:"Access Key",placeholder:"\u4F8B\u5982\uFF1Aminioadmin",note:"\u5FC5\u9700\u3002\u4F60\u7684 MinIO \u7528\u6237\u540D\u3002",required:!0},{key:"secretAccessKey",label:"Secret Key",placeholder:"\u4F8B\u5982\uFF1Aminioadmin",note:"\u5FC5\u9700\u3002\u4F60\u7684 MinIO \u5BC6\u7801\u3002",required:!0,type:"password"},{key:"region",label:"Region",placeholder:"us-east-1",note:"\u53EF\u4E3A\u4EFB\u610F\u5408\u6CD5\u5B57\u7B26\u4E32\uFF0C\u9ED8\u8BA4 us-east-1\u3002",required:!0,defaultValue:"us-east-1"},{key:"useSSL",label:"Use SSL",placeholder:"",note:"\u4E0E endpoint \u534F\u8BAE\u4FDD\u6301\u4E00\u81F4\u3002",required:!0,defaultValue:!1,type:"toggle"},{key:"baseUrl",label:"Public Base URL",placeholder:"\u53EF\u4E3A\u7A7A",note:"\u7528\u4E8E\u62FC\u63A5\u53EF\u8BBF\u95EE\u94FE\u63A5\uFF0C\u4E0D\u7528\u4E8E API\u3002",required:!1},{key:"keyPrefix",label:"Key Prefix",placeholder:"images/ \u6216 yyyy/mm/dd/",note:"\u5BF9\u8C61\u952E\u524D\u7F00\uFF0C\u53EF\u9009\u3002",required:!1}],"aws-s3":[{key:"name",label:"\u914D\u7F6E\u540D\u79F0",placeholder:"\u4F8B\u5982\uFF1AAWS \u6B63\u5F0F\u73AF\u5883",note:"\u7ED9\u4F60\u81EA\u5DF1\u770B\u7684\u4E00\u4E2A\u53CB\u597D\u540D\u79F0\u3002",required:!0},{key:"endpoint",label:"Endpoint",placeholder:"https://s3.amazonaws.com \u6216\u533A\u57DF\u7AEF\u70B9",note:"\u53EF\u9009\u3002\u901A\u5E38\u65E0\u9700\u586B\u5199\uFF0C\u4FDD\u6301\u7A7A\u503C\u7531 SDK \u5904\u7406\u3002",required:!1},{key:"bucketName",label:"Bucket",placeholder:"\u4F8B\u5982\uFF1Amy-bucket",note:"\u5FC5\u9700\u3002AWS S3 \u5B58\u50A8\u6876\u540D\u79F0\u3002",required:!0},{key:"accessKeyId",label:"Access Key ID",placeholder:"AKIA...",note:"\u5FC5\u9700\u3002",required:!0},{key:"secretAccessKey",label:"Secret Access Key",placeholder:"********",note:"\u5FC5\u9700\u3002",required:!0,type:"password"},{key:"region",label:"Region",placeholder:"us-east-1",note:"\u5FC5\u586B\uFF0C\u5FC5\u987B\u4E3A\u5408\u6CD5\u533A\u57DF\u3002",required:!0},{key:"useSSL",label:"Use SSL",placeholder:"",note:"\u5EFA\u8BAE\u5F00\u542F\u3002",required:!0,defaultValue:!0,type:"toggle"},{key:"baseUrl",label:"Public Base URL",placeholder:"\u53EF\u4E3A\u7A7A\u6216\u81EA\u5B9A\u4E49\u57DF",note:"\u7528\u4E8E\u62FC\u63A5\u53EF\u8BBF\u95EE\u94FE\u63A5\uFF0C\u4E0D\u7528\u4E8E API\u3002",required:!1},{key:"keyPrefix",label:"Key Prefix",placeholder:"images/ \u6216 yyyy/mm/dd/",note:"\u5BF9\u8C61\u952E\u524D\u7F00\uFF0C\u53EF\u9009\u3002",required:!1}],custom:[{key:"name",label:"\u914D\u7F6E\u540D\u79F0",placeholder:"\u4F8B\u5982\uFF1A\u81EA\u5B9A\u4E49\u517C\u5BB9 S3",note:"\u7ED9\u4F60\u81EA\u5DF1\u770B\u7684\u4E00\u4E2A\u53CB\u597D\u540D\u79F0\u3002",required:!0},{key:"endpoint",label:"Endpoint",placeholder:"https://s3.example.com",note:"\u5FC5\u9700\u3002\u517C\u5BB9 S3 \u7684\u7AEF\u70B9\uFF0C\u901A\u5E38\u9700\u8981 http(s)://\u3002",required:!0},{key:"bucketName",label:"Bucket",placeholder:"my-bucket",note:"\u5FC5\u9700\u3002",required:!0},{key:"accessKeyId",label:"Access Key ID",placeholder:"AKIA... \u6216\u5176\u4ED6",note:"\u5FC5\u9700\u3002",required:!0},{key:"secretAccessKey",label:"Secret Access Key",placeholder:"********",note:"\u5FC5\u9700\u3002",required:!0,type:"password"},{key:"region",label:"Region",placeholder:"us-east-1",note:"\u53EF\u9009\uFF0C\u7559\u7A7A\u5219\u9ED8\u8BA4 us-east-1\u3002",required:!1},{key:"useSSL",label:"Use SSL",placeholder:"",note:"\u4E0E endpoint \u534F\u8BAE\u4FDD\u6301\u4E00\u81F4\u3002",required:!0,defaultValue:!0,type:"toggle"},{key:"baseUrl",label:"Public Base URL",placeholder:"\u53EF\u4E3A\u7A7A\u6216\u81EA\u5B9A\u4E49\u57DF",note:"\u7528\u4E8E\u62FC\u63A5\u53EF\u8BBF\u95EE\u94FE\u63A5\uFF0C\u4E0D\u7528\u4E8E API\u3002",required:!1},{key:"keyPrefix",label:"Key Prefix",placeholder:"images/ \u6216 yyyy/mm/dd/",note:"\u5BF9\u8C61\u952E\u524D\u7F00\uFF0C\u53EF\u9009\u3002",required:!1}]};function ue(){var e;try{let n=(e=localStorage.getItem("obS3Uploader.history"))!=null?e:"[]",t=JSON.parse(n);return Array.isArray(t)?t:[]}catch(n){return[]}}function fe(e){try{localStorage.setItem("obS3Uploader.history",JSON.stringify(e.slice(0,50)))}catch(n){}}var M=class extends p.PluginSettingTab{constructor(t,o,r){super(t,o);this.plugin=o}renderProfilesSection(t){t.createEl("h2",{text:c("Uploader Service Configuration")});let o=z(this.plugin),r=B(this.plugin),d=new p.Setting(t).setName(c("Select Profile")).setDesc(c("Select or switch to a different upload profile."));d.addDropdown(s=>{o.forEach(a=>{s.addOption(a.id,a.name||a.id)}),o.length&&(r!=null&&r.id)&&s.setValue(r.id),s.onChange(a=>{var u;h(this.plugin,a),this.display(),new p.Notice(K("Switched to profile: {name}",{name:((u=o.find(i=>i.id===a))==null?void 0:u.name)||a}))})}),d.addButton(s=>{s.setButtonText(c("New Profile")).onClick(()=>{let a=k(this.plugin,{name:"New Profile",providerType:"custom",region:"us-east-1",useSSL:!0});h(this.plugin,a.id),this.display(),new p.Notice(c("Profile created"))})}),r!=null&&r.id&&d.addButton(s=>{s.setButtonText(c("Delete Current Profile")).onClick(()=>{Y(this.plugin,r.id),this.display(),new p.Notice(c("Profile removed"))})});let l=new p.Setting(t).setName(c("Profile Base"));l.addText(s=>{var a;s.setPlaceholder(c("Profile Name *")).setValue((a=r==null?void 0:r.name)!=null?a:"").onChange(u=>{if(!r)return;let i=k(this.plugin,{id:r.id,name:u.trim()});h(this.plugin,i.id),this.display()})}),l.addDropdown(s=>{var u;["cloudflare-r2","minio","aws-s3","custom"].forEach(i=>s.addOption(i,c(i))),s.setValue((u=r==null?void 0:r.providerType)!=null?u:"custom"),s.onChange(i=>{if(!r)return;let f=k(this.plugin,{id:r.id,providerType:i});h(this.plugin,f.id),this.display()})})}renderProfileForm(t){var d;let o=B(this.plugin),r=(d=ee[o.providerType])!=null?d:ee.custom;t.createEl("h3",{text:c("Profile Details")});for(let l of r){let s=o[l.key],a=new p.Setting(t).setName(c(l.label+(l.required?" *":""))).setDesc(l.note?c(l.note):"");if(l.type==="toggle"){a.addToggle(u=>{var i;u.setValue(Boolean((i=s!=null?s:l.defaultValue)!=null?i:!1)),u.onChange(f=>{let y={id:o.id,[l.key]:f},P=k(this.plugin,y);h(this.plugin,P.id)})});continue}a.addText(u=>{var i;if(u.setPlaceholder(c(l.placeholder)),u.setValue(((i=s!=null?s:l.defaultValue)!=null?i:"").toString()),l.type==="password")try{u.inputEl.type="password"}catch(f){}u.onChange(f=>{let y={id:o.id,[l.key]:f.trim()},P=k(this.plugin,y);h(this.plugin,P.id)})})}}renderActions(t){let o=new p.Setting(t).setName(c("Actions")).setDesc(c("Save and Reload")+" / "+c("Test Connection"));o.addButton(r=>{r.setButtonText(c("Save and Reload")).setCta().onClick(()=>{this.plugin.reloadS3ConfigAndClient&&this.plugin.reloadS3ConfigAndClient(),new p.Notice(c("Profile updated"))})}),o.addButton(r=>{r.setButtonText(c("Test Connection")).onClick(async d=>{var H,V,j,J;let l=this.plugin,s=D(l),a=(H=d.currentTarget)!=null?H:null,u=(V=a==null?void 0:a.disabled)!=null?V:!1;a&&"disabled"in a&&(a.disabled=!0);let i=((j=s.keyPrefix)!=null?j:"").replace(/^\/+/,"").replace(/\/+$/,""),y=`${i?`${i}/`:""}__ob_test__${Date.now()}_${Math.random().toString(36).slice(2)}.png`,P="iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAOQy5CwAAAAASUVORK5CYII=",S=(J=window.fetch)==null?void 0:J.bind(window),E=[/(^|\.)r2\.cloudflarestorage\.com$/i,/(^|\.)r2\.dev$/i],w=g=>{try{let N=new URL(g,window.location.origin).hostname;return E.some(R=>R.test(N))}catch(q){return!1}},U=(()=>typeof window.fetch!="function"||!S?()=>{}:(window.fetch=async(g,q)=>{var R;let N=typeof g=="string"?g:(R=g==null?void 0:g.url)!=null?R:String(g);return w(N)?(console.warn("[ob-s3-gemini] Blocked renderer fetch to R2 during Test Connection:",N),Promise.reject(new TypeError("Blocked renderer fetch to R2 during Test Connection"))):S(g,q)},()=>{window.fetch=S}))();try{this.app.workspace.trigger("execute-command",{id:"obs3gemini-test-connection"})}catch(g){((g==null?void 0:g.message)||"").includes("Blocked renderer fetch to R2 during Test Connection")?(console.warn("[ob-s3-gemini] Renderer fetch was blocked during Test Connection window; ignoring as non-fatal."),new p.Notice("\u5DF2\u963B\u65AD\u6E32\u67D3\u7AEF\u76F4\u8FDE R2\uFF08\u6D4B\u8BD5\u671F\uFF09\uFF0C\u8BE5\u63D0\u793A\u4E0D\u5F71\u54CD\u4E3B\u8FDB\u7A0B\u8FDE\u901A\u6027\u7ED3\u679C")):(console.error("[ob-s3-gemini] Test Connection failed (main path):",g),new p.Notice(K("Connection test failed: {error}",{error:g.message})))}finally{try{U&&U()}catch(g){}a&&"disabled"in a&&(a.disabled=u)}})})}display(){let{containerEl:t}=this;t.empty(),this.renderProfilesSection(t),this.renderProfileForm(t),t.createEl("h3",{text:c("Upload History")});let o=t.createDiv({cls:"ob-s3-history"}),r=()=>{o.empty();let d=ue();if(!d.length){o.createEl("div",{text:c("No upload history yet.")});return}let l=o.createDiv({cls:"ob-s3-history-ops"}),s=l.createEl("button",{text:c("Copy All Links")}),a=l.createEl("button",{text:c("Clear History")});s.onclick=async()=>{try{let i=d.filter(f=>f.url).map(f=>f.url).join(`
`);if(!i){new p.Notice(c("No successful uploads to copy."));return}await navigator.clipboard.writeText(i),new p.Notice(c("All links copied to clipboard"))}catch(i){new p.Notice(c("Copy failed"))}},a.onclick=()=>{fe([]),r(),new p.Notice(c("Upload history cleared"))};let u=o.createEl("div",{cls:"ob-s3-history-list"});d.slice(0,50).forEach(i=>{var S,E;let f=u.createEl("div",{cls:"ob-s3-history-row"}),y=f.createEl("div",{cls:"ob-s3-history-meta"}),P=new Date((S=i.time)!=null?S:Date.now()).toLocaleString();if(y.createEl("div",{text:(E=i.fileName)!=null?E:c("(unknown file)")}),y.createEl("div",{text:i.key?`Key: ${i.key}`:c("Key: -")}),y.createEl("div",{text:`${c("Time")}: ${P}`}),i.error)f.createEl("div",{cls:"ob-s3-history-error"}).createEl("span",{text:`${c("Error")}: ${i.error}`});else{let w=f.createEl("div",{cls:"ob-s3-history-link"}),_=w.createEl("a",{text:i.url,href:i.url});_.target="_blank";let U=w.createEl("button",{text:c("Copy")});U.onclick=async()=>{await navigator.clipboard.writeText(i.url),new p.Notice(c("Link copied"))}}})};this.renderActions(t),r()}};var $=class extends L.Plugin{async onload(){await Z(this),this.addSettingTab(new M(this.app,this,te)),await D(this),this.addCommand({id:"obs3gemini-test-connection",name:c("Test Connection"),callback:async()=>{var n;try{new L.Notice(c("Connection test succeeded"))}catch(t){new L.Notice(K("Connection test failed: {error}",{error:(n=t==null?void 0:t.message)!=null?n:String(t)}))}}})}async onunload(){}};
