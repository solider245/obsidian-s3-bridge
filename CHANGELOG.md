# Obsidian S3-Bridge 变更日志

所有重要的项目变更都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.1.1] - 2025-08-20

### 新增功能
- **大文件分片上传**: 实现了超过10MB文件的大文件分片上传功能，支持断点续传和并行上传
- **内存使用优化**: 优化了大文件上传的内存使用，采用流式处理避免内存溢出
- **上传进度管理**: 新增上传进度跟踪和显示功能，包括上传速度和剩余时间估算
- **配置缓存机制**: 实现了配置信息缓存，提高访问速度和性能
- **代码质量工具**: 集成了ESLint和Prettier代码规范工具

### 技术改进
- **错误处理优化**: 改进了错误处理和重试机制，使用指数退避策略
- **ETag处理修复**: 修复了分片上传中的ETag获取问题，提高上传可靠性
- **测试覆盖完善**: 大幅提升测试覆盖率，新增41个单元测试
- **类型安全**: 优化了TypeScript类型定义，移除了大部分`any`类型使用
- **代码清理**: 清理了未使用的导入和变量，优化了构建体积

### 修复问题
- 修复了S3上传返回相同链接的问题
- 修复了分片上传中的ETag获取和处理问题
- 修复了代码中的ESLint错误和代码格式问题
- 修复了大文件上传可能导致的内存溢出问题

### 开发体验
- 完善了开发者文档和API文档
- 添加了项目索引和流程图文档
- 优化了开发工作流程和构建过程
- 集成了完整的CI/CD工作流

## [1.1.0] - 2025-08-19

### 新增功能
- **图片离线缓存**: 实现了图片的离线缓存功能，通过`Cache-Control`头优化离线访问
- **活动日志**: 新增详细的活动日志功能，支持筛选、导出和统计
- **大文件高亮**: 在日志中高亮显示大文件条目，便于识别
- **日志管理**: 支持单条日志删除、全部清除、复制和导出功能

### 技术改进
- **缓存控制**: 上传的图片默认带有一年的缓存时间，可自定义
- **日志筛选**: 支持按事件类型筛选日志（上传成功、失败、重试等）
- **Markdown导出**: 可将日志导出为Markdown格式
- **统计信息**: 显示上传统计摘要（总上传数、成功率、失败数、节省空间）

### 用户体验
- **界面优化**: 改进了设置页面的用户体验
- **错误提示**: 优化了错误提示信息，更加友好和详细
- **URL高亮**: 在日志中将URL地址用蓝色高亮显示

## [1.0.0] - 2025-08-15

### 新增功能
- **基础上传功能**: 支持粘贴图片和文件自动上传到S3兼容存储
- **预签名上传**: 采用安全的预签名URL方式上传，保护密钥安全
- **乐观占位符**: 上传过程中显示临时占位符，完成后自动替换
- **失败重试**: 上传失败时提供一键重试功能
- **多配置支持**: 支持多套S3配置方案，方便切换
- **灵活命名**: 支持自定义文件存储路径和命名规则
- **大小限制**: 可设置文件大小阈值，超大文件弹出确认

### 支持服务
- Amazon S3
- Cloudflare R2
- MinIO
- Backblaze B2
- DigitalOcean Spaces
- Wasabi
- 其他S3兼容服务

### 核心特性
- **安全性**: 预签名URL上传，密钥不暴露在插件中
- **可靠性**: 完善的错误处理和重试机制
- **易用性**: 粘贴即上传，无需手动操作
- **灵活性**: 支持多种存储服务和配置方案
- **国际化**: 支持多语言界面

## [0.1.0] - 2025-08-10

### 初始版本
- 项目初始化
- 基础架构搭建
- 配置管理系统
- 基本的上传功能

---

## 版本说明

- **主版本号**: 重大功能变更或API不兼容的修改
- **次版本号**: 向后兼容的功能新增
- **修订号**: 向后兼容的问题修复